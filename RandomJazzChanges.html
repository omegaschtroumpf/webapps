<!DOCTYPE html>  
<html> 
<head>
    <meta name="apple-mobile-web-app-capable" content="yes">   
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta charset="utf-8">
    <meta name="HandheldFriendly" content="True">   
    <meta name="MobileOptimized" content="320"/>   
    <meta name="viewport" content="width=device-width, initial-scale=1.0">        
    <title>Random Jazz Changes</title>  
    <script>
        var keys = new Array(); 
        var prog = new Array(); 
        var pr251 = new Array();
        var prsus = new Array(); 
        var prphry = new Array();
        var prtt = new Array(); 
        var prtt251 = new Array();
        var prlh = new Array();
        var t; 
        var combo=0; 
        var flipping=0; 
        var speed=0;
        keys[0] = 'A';
        keys[1] = 'Ab';
        keys[2] = 'B';
        keys[3] = 'Bb';
        keys[4] = 'C';
        keys[5] = 'D';
        keys[6] = 'Db';
        keys[7] = 'E';
        keys[8] = 'Eb';
        keys[9] = 'F';
        keys[10] = 'F#';
        keys[11] = 'G';
        pr251[0] = 'ii-V<sup>7</sup>-I root'; 
        pr251[1] = 'ii-V<sup>7</sup>-I 1st'; 
        pr251[2] = "ii-V<sup>7</sup>-I 2nd"; 
        prsus[0] = "Vsus-I root<sup>&nbsp</sup>";
        prsus[1] = "Vsus-I 1st<sup>&nbsp</sup>";
        prsus[2] = "Vsus-I 2nd<sup>&nbsp</sup>" 
        prphry[0] = "Phry-I<sup>&nbsp</sup>";
        prtt[0] = "TT V<sup>7</sup> root";
        prtt[1] = "TT V<sup>7</sup> 1st";
        prtt[2] = "TT V<sup>7</sup> 2nd";
        prtt251[0] = "TT ii-V<sup>7</sup> root";
        prtt251[1] = "TT ii-V<sup>7</sup> 1st";
        prtt251[2] = "TT ii-V<sup>7</sup> 2nd";
        prlh[0] = "ii-V<sup>7</sup>-I LH A";
        prlh[1] = "ii-V<sup>7</sup>-I LH B";

        buildProg();
        function buildProg() {
            i = 0;
            prog = new Array();
            if (document.getElementById("pr251check").checked) {
                for (k=0; k< keys.length; k++) {
                    for (j=0; j< pr251.length; j++) {
                        prog[i] = keys[k] + "<sup>&nbsp</sup> : " + pr251[j];
                        i++;
                    }
                }
            }
            if (document.getElementById("prsuscheck").checked) {
                for (k=0; k< keys.length; k++) {
                    for (j=0; j< prsus.length; j++) {
                        prog[i] = keys[k] + "<sup>&nbsp</sup> : " + prsus[j];
                        i++;
                    }
                }
            }
            if (document.getElementById("prphrycheck").checked) {
                for (k=0; k< keys.length; k++) {
                    for (j=0; j< prphry.length; j++) {
                        prog[i] = keys[k] + "<sup>&nbsp</sup> : " + prphry[j];
                        i++;
                    }
                }
            }
            if (document.getElementById("prttcheck").checked) {
                for (k=0; k< keys.length; k++) {
                    for (j=0; j< prtt.length; j++) {
                        prog[i] = keys[k] + "<sup>&nbsp</sup> : " + prtt[j];
                        i++;
                    }
                }
            }
            if (document.getElementById("prtt251check").checked) {
                for (k=0; k< keys.length; k++) {
                    for (j=0; j< prtt251.length; j++) {
                        prog[i] = keys[k] + "<sup>&nbsp</sup> : " + prtt251[j];
                        i++;
                    }
                }
            }
            if (document.getElementById("prlhcheck").checked) {
                for (k=0; k< keys.length; k++) {
                    for (j=0; j< prlh.length; j++) {
                        prog[i] = keys[k] + "<sup>&nbsp</sup> : " + prlh[j];
                        i++;
                    }
                }
            }
            //randomize
            for (i = prog.length -1; i > 0; i--) {
                j = Math.floor(Math.random() * i);
                k = prog[i];
                prog[i] = prog[j];
                prog[j] = k;
            }
            //document.getElementById("progstring").innerHTML = prog.toString(); 
        }
        function newKeyProg(){
            if (prog.length == 0) buildProg();
            document.getElementById("howMany").innerHTML = prog.length  ;
            document.getElementById("keyprog").innerHTML = prog.pop();
            clearInterval(t);
            t=setInterval(function(){ newKeyProg()}, speed);


        }      
        
        function doAutoChange(){ 
            newKeyProg();
            changeseconds = document.getElementById("timer").value;
        if (changeseconds >0){         
        changing=1;   
        speed=changeseconds*1000; 
        clearInterval(t);     
        t=setInterval(function(){ newKeyProg()}, speed);     
        }
        else stopChange();
        } 
        function stopChange() {     
        clearInterval(t);     
        changing=0; 
        } 
    </script>  
    <style>
        body {
        font-family:arial, helvetica;
        text-align: center;
        background-color:steelblue;
        color:white;
        }
        .keytext {
            height:136px;
            font-size:112px;
            margin:2px;
        }
        .big {
            font-size:36px;
        }
        .small {
            height:14px;
            margin:0px;
            font-size:14px;
        }
        .bigcheck {
            height:18px;
            width:18px
        }
    </style>  
</head>  
<body>   
    <div id="container">
        <h1 id="keyprog" class="keytext" onclick="newKeyProg()"><sup>&nbsp</sup>Start the Timer</h1>
        <p id="howMany" class="small"></p>
        <input id="timer" onchange="getElementById('thebutton').value = getElementById('timer').value + ' seconds'" type="range" min="4" max="10" step="1" value="10"/>
        <input id ="thebutton" type="button" value="10 seconds" onclick="doAutoChange()" />
        <br />
        <div class="big">
            <input id ="pr251check" type="checkbox" class="bigcheck" onclick="buildProg()" />
            <label for="pr251check">ii-V<sup>7</sup>-I</label>
            <input id ="prlhcheck" type="checkbox" class="bigcheck" onclick="buildProg()" />
            <label for="prlhcheck">Left Hand ii-V<sup>7</sup>-I</label>
            <br />
            <input id ="prsuscheck" type="checkbox" class="bigcheck" onclick="buildProg()" />
            <label for="prsuscheck">sus</label>
            <input id ="prphrycheck" type="checkbox" class="bigcheck" onclick="buildProg()" />
            <label for="prphrycheck">Phrygian</label>
            <br />
            <input id ="prttcheck" type="checkbox" class="bigcheck" onclick="buildProg()" />
            <label for="prttcheck">Tritone V<sup>7</sup></label>
            <input id ="prtt251check" type="checkbox" class="bigcheck" onclick="buildProg()" />
            <label for="prtt251check">Tritone ii-V<sup>7</sup>-I</label>
        </div>
        <br />
        <div id="progstring"></div>
    </div>
</body> 
</html> 